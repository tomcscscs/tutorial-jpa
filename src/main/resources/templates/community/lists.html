<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>JPA - tutorial</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link th:href="@{/css/style.css}" rel="stylesheet" />
</head>
<body>
	<div class="container py-3">
		<div class="py-2 fs-4 border-bottom text-success">
			<a th:href="@{/community/lists}"
				class="link-underline-light link-success link-underline-opacity-0">익명
				커뮤니티</a> <span class="fs-6 text-secondary">글목록</span>
		</div>
		<div
			class="py-2 text-secondary d-flex justify-content-between align-items-center"
			style="font-size: small">
			<div th:if="${cmd.keyword} == null">
				<span th:text="${count}" class="text-success"></span>개의 글이 작성되어
				있습니다.
			</div>
			<div th:if="${cmd.keyword != null}">
				<span th:text="${count}" class="text-success"></span>개의 글이 검색 되었습니다.
			</div>
			<div>
				<a th:href="@{/community/write}"
					class="btn btn-sm py-0 px-1 btn-success">글쓰기</a>
			</div>
		</div>
		<div style="min-height: 280px;">
			<table class="table table-sm table-hover">
				<thead>
					<tr>
						<th scope="col" style="width: 40px;">번호</th>
						<th scope="col">제목</th>
						<th scope="col" style="width: 95px;">글쓴이</th>
						<th scope="col" style="width: 95px;">작성일</th>
						<th scope="col" style="width: 40px;">조회</th>
						<th scope="col" style="width: 40px;">추천</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="one : ${feeds}" th:object="${one}">
						<td th:text="${#object.id}" class="text-truncate"></td>
						<td class="text-truncate"><a
							th:href="@{/community/view(id=*{id})}"
							class="link-dark link-underline link-underline-opacity-0 
						link-offset-1 link-underline-opacity-75-hover"><span
								th:text="${one.title}"></span></a></td>
						<td th:text="${one.writer}" class="text-truncate"></td>
						<td th:text="*{#temporals.format(writedAt, 'yyyy.MM.dd')}"
							class="text-truncate"></td>
						<td th:text="*{viewCount}" class="text-center"></td>
						<td th:text="*{likeCount}" class="text-center"></td>
					</tr>
				</tbody>
			</table>
		</div>
		
		<!-- 페이지 -->
		<ul class="pagination pagination-sm justify-content-center mb-1">
			<li th:each="val : ${#numbers.sequence(1, lastPage)}"
				class="page-item"
				th:classappend="${cmd.page == null ? (val==1?'active':'') : (cmd.page==val ? 'active' :'' )}">
				<a class="page-link"
				th:href="@{/community/lists(page=${val},keyword=${cmd.keyword})}"
				th:text="${val}"></a>
			</li>

		</ul>
		
		<!-- 검색폼 -->
		<form th:action="@{/community/lists}" method="get"
			class="d-flex gap-1 justify-content-center" autocomplete="off">
			<input type="hidden" name="page" value="1" />
			<div style="width: 150px" class="input-group-sm">
				<select class="form-select form-select-sm" disabled>
					<option>제목</option>
				</select>
			</div>
			<div style="width: 350px" class="input-group-sm">
				<input type="text" class="form-control" name="keyword"
					th:value="${cmd.keyword}" />

			</div>
		</form>
	</div>


</body>

</html>


